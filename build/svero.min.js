!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).svero={})}(this,function(t){"use strict";function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function c(t){t.forEach(o)}function s(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,n){const o=e.subscribe(n);t.$$.on_destroy.push(o.unsubscribe?()=>o.unsubscribe():o)}function u(t,e,n){if(t){const o=l(t,e,n);return t[0](o)}}function l(t,e,o){return t[1]?n({},n(e.$$scope.ctx,t[1](o?o(e):{}))):e.$$scope.ctx}function f(t,e,o,r){return t[1]?n({},n(e.$$scope.changed||{},t[1](r?r(o):{}))):e.$$scope.changed||{}}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function y(){return m(" ")}function v(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}let k;function x(t){k=t}function b(){if(!k)throw new Error("Function called outside component initialization");return k}function _(t){b().$$.on_mount.push(t)}function w(){const t=k;return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,r)})}}}const E=[],j=Promise.resolve();let N=!1;const O=[],I=[],S=[];function C(t){I.push(t)}function R(){const t=new Set;do{for(;E.length;){const t=E.shift();x(t),T(t.$$)}for(;O.length;)O.shift()();for(;I.length;){const e=I.pop();t.has(e)||(e(),t.add(e))}}while(E.length);for(;S.length;)S.pop()();N=!1}function T(t){t.fragment&&(t.update(t.dirty),c(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(C))}let L;function P(t,e){t.$$.dirty||(E.push(t),N||(N=!0,j.then(R)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function A(t,n,i,a,u,l){const f=k;x(t);const p=n.props||{},d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(f?f.$$.context:[]),callbacks:r(),dirty:null};let h=!1;d.ctx=i?i(t,p,(e,n)=>{d.ctx&&u(d.ctx[e],d.ctx[e]=n)&&(d.bound[e]&&d.bound[e](n),h&&P(t,e))}):p,d.update(),h=!0,c(d.before_render),d.fragment=a(d.ctx),n.target&&(n.hydrate?d.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):d.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),function(t,e,n){const{fragment:r,on_mount:i,on_destroy:a,after_render:u}=t.$$;r.m(e,n),C(()=>{const e=i.map(o).filter(s);a?a.push(...e):c(e),t.$$.on_mount=[]}),u.forEach(C)}(t,n.target,n.anchor),R()),x(f)}class M{$destroy(){var t,n;n=!0,(t=this).$$&&(c(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var q=function(t){function e(e,n){var o="Unreachable '"+e+"', segment '"+n+"' is not defined";t.call(this,o),this.message=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);var B=function(t,e){var n=function(t,e){var n,o,r=-100,c=[];n=t.replace(/[-$.]/g,"\\$&").replace(/\(/g,"(?:").replace(/\)/g,")?").replace(/([:*]\w+)(?:<([^<>]+?)>)?/g,function(t,e,n){return c.push(e.substr(1)),":"===e.charAt()?(r+=100,"((?!#)"+(n||"[^/]+?")+")"):(o=!0,r+=500,"((?!#)"+(n||".+?")+")")});try{n=new RegExp("^"+n+"$")}catch(t){throw new TypeError("Invalid route expression, given '"+e+"'")}var s=t.includes("#")?.5:1,i=t.length*r*s;return{keys:c,regex:n,_depth:i,_isSplat:o}}(t,e),o=n.keys,r=n.regex,c=n._depth;return{_isSplat:n._isSplat,_depth:c,match:function(t){var e=t.match(r);if(e)return o.reduce(function(t,n,o){return t[n]="string"==typeof e[o+1]?decodeURIComponent(e[o+1]):null,t},{})}}};function U(t,e){return""+(e&&"/"!==e?e:"")+(t||"")}function z(t,e){var n=t.match(/<[^<>]*\/[^<>]*>/);if(n)throw new TypeError("RegExp cannot contain slashes, given '"+n+"'");var o="/"!==t?t.split("/"):[""],r=[];o.some(function(t,n){var c=r.concat(t).join("/")||null,s=o.slice(n+1).join("/")||null,i=e("/"+t,c,s?(t?"/"+t:"")+"/"+s:null);return r.push(t),i})}function D(t,e,n){for(var o=function(t,e,n){var o,r={},c=[];return z(t,function(s,i,a){var u;if(!e.keys)throw new q(t,s);if(e.keys.some(function(t){if(n.includes(t))return!1;var l=e[t].pattern,f=l.match,p=l._isSplat,d=f(p&&a||s);return!!d&&(Object.assign(r,d),e[t].route&&c.push(Object.assign({},e[t].info,{matches:s===i||p||!a,params:Object.assign({},r),route:e[t].route,path:p?a:i||s})),null===a&&!e[t].keys||("/"!==t&&n.push(t),o=p,e=e[t],u=!0,!0))}),!u&&!e.keys.some(function(t){return e[t].pattern.match(s)}))throw new q(t,s);return o||!u}),c}.bind(null,t,e),r=[];n>0;){n-=1;try{return o(r)}catch(t){if(n>0)return o(r);throw t}}}B.push=function(t,e,n,o){var r=e[t]||(e[t]={});return r.pattern||(r.pattern=new B(t,o),r.route=n||"/"),e.keys=e.keys||[],e.keys.includes(t)||(e.keys.push(t),B.sort(e)),r},B.sort=function(t){t.keys.sort(function(e,n){return t[e].pattern._depth-t[n].pattern._depth})};function F(t){if(!t||"string"!=typeof t)throw Error(`svero expects navigateTo() to have a string parameter. The parameter provided was: ${t} of type ${typeof t} instead.`);if("/"!==t[0]&&"#"!==t[0])throw Error(`svero expects navigateTo() param to start with slash or hash, e.g. "/${t}" or "#${t}" instead of "${t}".`);history.pushState&&window.dispatchEvent?(history.pushState({},"",t),window.dispatchEvent(new Event("popstate"))):window.location.href=t}function G(t){var e,n,o,r,c,s,i;return{c(){e=$("fieldset"),n=$("legend"),o=m("Router failure: "),r=m(t.path),c=y(),s=$("pre"),i=m(t.failure)},m(t,a){d(t,e,a),p(e,n),p(n,o),p(n,r),p(e,c),p(e,s),p(s,i)},p(t,e){t.path&&g(r,e.path),t.failure&&g(i,e.failure)},d(t){t&&h(e)}}}function H(t){var e,n,o,r=t.failure&&!t.nofallback&&G(t);const c=t.$$slots.default,s=u(c,t,null);return{c(){r&&r.c(),e=y(),s&&s.c(),o=v(window,"popstate",t.handlePopState)},l(t){s&&s.l(t)},m(t,o){r&&r.m(t,o),d(t,e,o),s&&s.m(t,o),n=!0},p(t,n){n.failure&&!n.nofallback?r?r.p(t,n):((r=G(n)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),s&&s.p&&t.$$scope&&s.p(f(c,n,t,null),l(c,n,null))},i(t){n||(s&&s.i&&s.i(t),n=!0)},o(t){s&&s.o&&s.o(t),n=!1},d(t){r&&r.d(t),t&&h(e),s&&s.d(t),o()}}}const J=new function(){var t={},e=[];return{mount:function(t,n){"/"!==t&&e.push(t),n(),e.pop()},find:function(e,n){return D(e,t,!0===n?2:n||1)},add:function(n,o){return function(t,e,n,o){var r=U(t,n),c=e;return z(r,function(t,e){c=B.push(t,c,e,r),"/"!==t&&(c.info=c.info||Object.assign({},o))}),c.info=c.info||Object.assign({},o),r}(n,t,e.join(""),o)},rm:function(n){return function(t,e,n){var o=U(t,n),r=e,c=null,s=null;if(z(o,function(n){if(!r)return c=null,!0;if(s=n,!(c="/"===n?e["/"]:r).keys)throw new q(t,n);r=r[n]}),!c||!s)throw new q(t,s);delete c[s],"/"===s&&(delete c.info,delete c.route),-1!==c.keys.indexOf(s)&&(c.keys.splice(c.keys.indexOf(s),1),B.sort(c))}(n,t,e.join(""))}}};function K(t){return"/#*"===t||"#*"===t?"#*_":"/*"===t||"*"===t?"/*_":t}function Q(t,n,o){let r,c,s,u,{path:l="/",nofallback:f=null}=n;const p=function(t,n=e){let o;const r=[];function c(e){if(i(t,e)){if(t=e,!o)return;r.forEach(t=>t[1]()),r.forEach(e=>e[0](t))}}return{set:c,update:function(e){c(e(t))},subscribe:function(s,i=e){const a=[s,i];return r.push(a),1===r.length&&(o=n(c)||e),s(t),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&o()}}}}({});function d(t){const e=t.reduce((t,e)=>(t[e.key]=Object.assign(t[e.key]||{},e.params),t),{});let n,o={};t.some(t=>{if("boolean"==typeof t.condition||"function"==typeof t.condition){if(!1===("function"==typeof t.condition?t.condition():t.condition)&&t.redirect)return F(t.redirect),n=!0,!0}if(t.key&&!o[t.key]){if(t.exact&&!t.matches)return!1;o[t.key]={...t,params:e[t.key]}}return!1}),n||(r=o,p.set(r))}function h(t,e){r[u]={failure:t,params:{_:e.substr(1)}},p.set(r)}function $(){const t=`/${location.href.split("/").slice(3).join("/")}`.replace(/\?[^#]*/,"").replace(/(?!^)\/#/,"#").replace("/#","#").replace(/\/$/,"");try{const e=function(t){const e=t.split("#")[0].split("/"),n=[],o=[];return e.forEach(e=>{const r=n.concat(`/${e}`).join("");e&&n.push(`/${e}`);try{const e=J.find(r);d(e),o.push(...e)}catch(e){h(e,t)}}),o}(t);t.includes("#")&&d(e.concat(J.find(t)))}catch(e){if(!u)return void o("failure",s=e);h(e,t)}}function m(){clearTimeout(c),c=setTimeout($,100)}var y,v;a(t,p,t=>{o("$routeInfo",r=t)}),_(()=>{m()}),y="__svero__",v={routeInfo:p,assignRoute:function(t,e,n){const o={key:t=t||Math.random().toString(36).substr(2),...n};let r;return J.mount(l,()=>{r=J.add(K(e),o),u=o.fallback&&t||u}),m(),[t,r]},unassignRoute:function(t){J.mount(l,()=>{J.rm(K(t))}),m()}},b().$$.context.set(y,v);let{$$slots:g={},$$scope:k}=n;return t.$set=t=>{"path"in t&&o("path",l=t.path),"nofallback"in t&&o("nofallback",f=t.nofallback),"$$scope"in t&&o("$$scope",k=t.$$scope)},{failure:s,path:l,nofallback:f,routeInfo:p,handlePopState:$,$$slots:g,$$scope:k}}const V=({router:t})=>({router:t}),W=({router:t})=>({router:t});function X(t){var e;return{c(){(e=$("div")).className="ctx svelte-h7mijx",e.dataset.svero="ctx"},m(t,n){d(t,e,n)},d(t){t&&h(e)}}}function Y(t){var e;const n=t.$$slots.default,o=u(n,t,W);return{c(){o&&o.c()},l(t){o&&o.l(t)},m(t,n){o&&o.m(t,n),e=!0},p(t,e){o&&o.p&&(t.$$scope||t.router)&&o.p(f(n,e,t,V),l(n,e,W))},i(t){e||(o&&o.i&&o.i(t),e=!0)},o(t){o&&o.o&&o.o(t),e=!1},d(t){o&&o.d(t)}}}function Z(t){var e,n,o,r=!t.ctxLoaded&&X(),s=t.router&&!t.component&&Y(t);return{c(){r&&r.c(),e=y(),s&&s.c(),n=m("")},m(t,c){r&&r.m(t,c),d(t,e,c),s&&s.m(t,c),d(t,n,c),o=!0},p(t,o){var i;o.ctxLoaded?r&&(r.d(1),r=null):r||((r=X()).c(),r.m(e.parentNode,e)),o.router&&!o.component?s?(s.p(t,o),s.i(1)):((s=Y(o)).c(),s.i(1),s.m(n.parentNode,n)):s&&(i=()=>{s.d(1),s=null},(L={remaining:0,callbacks:[]}).callbacks.push(i),s.o(1),L.remaining||c(L.callbacks))},i(t){o||(s&&s.i(),o=!0)},o(t){s&&s.o(),o=!1},d(t){r&&r.d(t),t&&h(e),s&&s.d(t),t&&h(n)}}}function tt(t,e,n){let o;const{assignRoute:r,unassignRoute:c,routeInfo:s}=function(t){return b().$$.context.get(t)}("__svero__");a(t,s,t=>{n("$routeInfo",o=t)});let i,u,l,f,{key:p=null,path:d="",exact:h,fallback:$,component:m,condition:y,redirect:v}=e;var g;_(()=>{[p,l]=r(p,d,{condition:y,redirect:v,fallback:$,exact:h}),n("key",p),n("ctx",i=document.querySelector('[data-svero="ctx"]').parentElement),n("ctxLoaded",u=!0)}),g=()=>{c(l)},b().$$.on_destroy.push(g);let k,{$$slots:x={},$$scope:w}=e;return t.$set=t=>{"key"in t&&n("key",p=t.key),"path"in t&&n("path",d=t.path),"exact"in t&&n("exact",h=t.exact),"fallback"in t&&n("fallback",$=t.fallback),"component"in t&&n("component",m=t.component),"condition"in t&&n("condition",y=t.condition),"redirect"in t&&n("redirect",v=t.redirect),"$$scope"in t&&n("$$scope",w=t.$$scope)},t.$$.update=(t={$routeInfo:1,key:1,router:1,component:1,current:1,ctx:1})=>{(t.$routeInfo||t.key)&&n("router",k=o[p]),(t.router||t.component||t.current)&&!k&&m&&f&&f.$destroy&&(f.$destroy(),n("current",f=null)),(t.ctx||t.router||t.component)&&i&&k&&m&&n("current",f=new m({target:i,props:{router:k}}))},{routeInfo:s,key:p,path:d,exact:h,fallback:$,component:m,condition:y,redirect:v,ctxLoaded:u,router:k,$$slots:x,$$scope:w}}function et(t){var e,n,o;const r=t.$$slots.default,c=u(r,t,null);return{c(){var n;e=$("a"),c&&c.c(),e.href=t.href,e.className=t.className,o=v(e,"click",(n=t.onClick,function(t){return t.preventDefault(),n.call(this,t)}))},l(t){c&&c.l(a_nodes)},m(t,o){d(t,e,o),c&&c.m(e,null),n=!0},p(t,o){c&&c.p&&t.$$scope&&c.p(f(r,o,t,null),l(r,o,null)),n&&!t.href||(e.href=o.href),n&&!t.className||(e.className=o.className)},i(t){n||(c&&c.i&&c.i(t),n=!0)},o(t){c&&c.o&&c.o(t),n=!1},d(t){t&&h(e),c&&c.d(t),o()}}}function nt(t,e,n){let{class:o="",href:r="/",className:c=""}=e;_(()=>{n("className",c=c||o)});const s=w();let{$$slots:i={},$$scope:a}=e;return t.$set=t=>{"class"in t&&n("cssClass",o=t.class),"href"in t&&n("href",r=t.href),"className"in t&&n("className",c=t.className),"$$scope"in t&&n("$$scope",a=t.$$scope)},{cssClass:o,href:r,className:c,onClick:function(t){let e=r;"/"!==e.charAt()&&(e=window.location.pathname+e),F(e),s("click",t)},$$slots:i,$$scope:a}}t.Link=class extends M{constructor(t){super(),A(this,t,nt,et,i,["class","href","className"])}},t.Route=class extends M{constructor(t){var e;super(),document.getElementById("svelte-h7mijx-style")||((e=$("style")).id="svelte-h7mijx-style",e.textContent=".ctx.svelte-h7mijx{display:none}",p(document.head,e)),A(this,t,tt,Z,i,["key","path","exact","fallback","component","condition","redirect"])}},t.Router=class extends M{constructor(t){super(),A(this,t,Q,H,i,["path","nofallback"])}},t.navigateTo=F,Object.defineProperty(t,"__esModule",{value:!0})});
