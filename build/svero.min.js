!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).svero={})}(this,function(t){"use strict";function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function c(t){t.forEach(o)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,n){const o=e.subscribe(n);t.$$.on_destroy.push(o.unsubscribe?()=>o.unsubscribe():o)}function u(t,e,n){if(t){const o=l(t,e,n);return t[0](o)}}function l(t,e,o){return t[1]?n({},n(e.$$scope.ctx,t[1](o?o(e):{}))):e.$$scope.ctx}function f(t,e,o,r){return t[1]?n({},n(e.$$scope.changed||{},t[1](r?r(o):{}))):e.$$scope.changed||{}}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function y(){return m(" ")}function v(){return m("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t,e){e=""+e,t.data!==e&&(t.data=e)}let b;function x(t){b=t}function _(){if(!b)throw new Error("Function called outside component initialization");return b}function w(t){_().$$.on_mount.push(t)}function E(){const t=b;return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,r)})}}}const j=[],N=Promise.resolve();let O=!1;const I=[],S=[],C=[];function R(t){S.push(t)}function T(){const t=new Set;do{for(;j.length;){const t=j.shift();x(t),L(t.$$)}for(;I.length;)I.shift()();for(;S.length;){const e=S.pop();t.has(e)||(e(),t.add(e))}}while(j.length);for(;C.length;)C.pop()();O=!1}function L(t){t.fragment&&(t.update(t.dirty),c(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(R))}let P;function A(){P={remaining:0,callbacks:[]}}function M(){P.remaining||c(P.callbacks)}function q(t){P.callbacks.push(t)}function B(t,e,n){const{fragment:r,on_mount:s,on_destroy:a,after_render:u}=t.$$;r.m(e,n),R(()=>{const e=s.map(o).filter(i);a?a.push(...e):c(e),t.$$.on_mount=[]}),u.forEach(R)}function U(t,e){t.$$.dirty||(j.push(t),O||(O=!0,N.then(T)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function z(t,n,o,i,s,a){const u=b;x(t);const l=n.props||{},f=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:null};let p=!1;f.ctx=o?o(t,l,(e,n)=>{f.ctx&&s(f.ctx[e],f.ctx[e]=n)&&(f.bound[e]&&f.bound[e](n),p&&U(t,e))}):l,f.update(),p=!0,c(f.before_render),f.fragment=i(f.ctx),n.target&&(n.hydrate?f.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):f.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),B(t,n.target,n.anchor),T()),x(u)}class D{$destroy(){var t,n;n=!0,(t=this).$$&&(c(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var F=function(t){function e(e,n){var o="Unreachable '"+e+"', segment '"+n+"' is not defined";t.call(this,o),this.message=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);var G=function(t,e){var n=function(t,e){var n,o,r=-100,c=[];n=t.replace(/[-$.]/g,"\\$&").replace(/\(/g,"(?:").replace(/\)/g,")?").replace(/([:*]\w+)(?:<([^<>]+?)>)?/g,function(t,e,n){return c.push(e.substr(1)),":"===e.charAt()?(r+=100,"((?!#)"+(n||"[^/]+?")+")"):(o=!0,r+=500,"((?!#)"+(n||".+?")+")")});try{n=new RegExp("^"+n+"$")}catch(t){throw new TypeError("Invalid route expression, given '"+e+"'")}var i=t.includes("#")?.5:1,s=t.length*r*i;return{keys:c,regex:n,_depth:s,_isSplat:o}}(t,e),o=n.keys,r=n.regex,c=n._depth;return{_isSplat:n._isSplat,_depth:c,match:function(t){var e=t.match(r);if(e)return o.reduce(function(t,n,o){return t[n]="string"==typeof e[o+1]?decodeURIComponent(e[o+1]):null,t},{})}}};function H(t,e){return""+(e&&"/"!==e?e:"")+(t||"")}function J(t,e){var n=t.match(/<[^<>]*\/[^<>]*>/);if(n)throw new TypeError("RegExp cannot contain slashes, given '"+n+"'");var o="/"!==t?t.split("/"):[""],r=[];o.some(function(t,n){var c=r.concat(t).join("/")||null,i=o.slice(n+1).join("/")||null,s=e("/"+t,c,i?(t?"/"+t:"")+"/"+i:null);return r.push(t),s})}function K(t,e,n){for(var o=function(t,e,n){var o,r={},c=[];return J(t,function(i,s,a){var u;if(!e.keys)throw new F(t,i);if(e.keys.some(function(t){if(n.includes(t))return!1;var l=e[t].pattern,f=l.match,p=l._isSplat,d=f(p&&a||i);return!!d&&(Object.assign(r,d),e[t].route&&c.push(Object.assign({},e[t].info,{matches:i===s||p||!a,params:Object.assign({},r),route:e[t].route,path:p?a:s||i})),null===a&&!e[t].keys||("/"!==t&&n.push(t),o=p,e=e[t],u=!0,!0))}),!u&&!e.keys.some(function(t){return e[t].pattern.match(i)}))throw new F(t,i);return o||!u}),c}.bind(null,t,e),r=[];n>0;){n-=1;try{return o(r)}catch(t){if(n>0)return o(r);throw t}}}G.push=function(t,e,n,o){var r=e[t]||(e[t]={});return r.pattern||(r.pattern=new G(t,o),r.route=n||"/"),e.keys=e.keys||[],e.keys.includes(t)||(e.keys.push(t),G.sort(e)),r},G.sort=function(t){t.keys.sort(function(e,n){return t[e].pattern._depth-t[n].pattern._depth})};function Q(t){if(!t||"string"!=typeof t)throw Error(`svero expects navigateTo() to have a string parameter. The parameter provided was: ${t} of type ${typeof t} instead.`);if("/"!==t[0]&&"#"!==t[0])throw Error(`svero expects navigateTo() param to start with slash or hash, e.g. "/${t}" or "#${t}" instead of "${t}".`);history.pushState&&window.dispatchEvent?(history.pushState({},"",t),window.dispatchEvent(new Event("popstate"))):window.location.href=t}function V(t){var e;return{c(){(e=h("div")).className="ctx svelte-h7mijx",e.dataset.svero="ctx"},m(t,n){d(t,e,n)},d(t){t&&$(e)}}}function W(t){var e,n,o,r,c,i,s;return{c(){e=h("fieldset"),n=h("legend"),o=m("Router failure: "),r=m(t.path),c=y(),i=h("pre"),s=m(t.failure)},m(t,a){d(t,e,a),p(e,n),p(n,o),p(n,r),p(e,c),p(e,i),p(i,s)},p(t,e){t.path&&k(r,e.path),t.failure&&k(s,e.failure)},d(t){t&&$(e)}}}function X(t){var e,n,o,r,c=!t.ctxLoaded&&V(),i=t.failure&&!t.nofallback&&W(t);const s=t.$$slots.default,a=u(s,t,null);return{c(){c&&c.c(),e=y(),i&&i.c(),n=y(),a&&a.c(),r=g(window,"popstate",t.handlePopState)},l(t){a&&a.l(t)},m(t,r){c&&c.m(t,r),d(t,e,r),i&&i.m(t,r),d(t,n,r),a&&a.m(t,r),o=!0},p(t,o){o.ctxLoaded?c&&(c.d(1),c=null):c||((c=V()).c(),c.m(e.parentNode,e)),o.failure&&!o.nofallback?i?i.p(t,o):((i=W(o)).c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),a&&a.p&&t.$$scope&&a.p(f(s,o,t,null),l(s,o,null))},i(t){o||(a&&a.i&&a.i(t),o=!0)},o(t){a&&a.o&&a.o(t),o=!1},d(t){c&&c.d(t),t&&$(e),i&&i.d(t),t&&$(n),a&&a.d(t),r()}}}const Y=new function(){var t={},e=[];return{mount:function(t,n){"/"!==t&&e.push(t),n(),e.pop()},find:function(e,n){return K(e,t,!0===n?2:n||1)},add:function(n,o){return function(t,e,n,o){var r=H(t,n),c=e;return J(r,function(t,e){c=G.push(t,c,e,r),"/"!==t&&(c.info=c.info||Object.assign({},o))}),c.info=c.info||Object.assign({},o),r}(n,t,e.join(""),o)},rm:function(n){return function(t,e,n){var o=H(t,n),r=e,c=null,i=null;if(J(o,function(n){if(!r)return c=null,!0;if(i=n,!(c="/"===n?e["/"]:r).keys)throw new F(t,n);r=r[n]}),!c||!i)throw new F(t,i);delete c[i],"/"===i&&(delete c.info,delete c.route),-1!==c.keys.indexOf(i)&&(c.keys.splice(c.keys.indexOf(i),1),G.sort(c))}(n,t,e.join(""))}}};function Z(t){return"/#*"===t||"#*"===t?"#*_":"/*"===t||"*"===t?"/*_":t}function tt(t,n,o){let r,c,i,u,l,f=!1,{path:p="/",nofallback:d=null}=n;const $=function(t,n=e){let o;const r=[];function c(e){if(s(t,e)){if(t=e,!o)return;r.forEach(t=>t[1]()),r.forEach(e=>e[0](t))}}return{set:c,update:function(e){c(e(t))},subscribe:function(i,s=e){const a=[i,s];return r.push(a),1===r.length&&(o=n(c)||e),i(t),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&o()}}}}({});function h(t){const e=t.reduce((t,e)=>(t[e.key]=Object.assign(t[e.key]||{},e.params),t),{});let n,o={};t.some(t=>{if("boolean"==typeof t.condition||"function"==typeof t.condition){if(!1===("function"==typeof t.condition?t.condition():t.condition)&&t.redirect)return Q(t.redirect),n=!0,!0}if(t.key&&!o[t.key]){if(t.exact&&!t.matches)return!1;o[t.key]={...t,params:e[t.key]}}return!1}),n||(r=o,$.set(r))}function m(t,e){r[l]={failure:t,params:{_:e.substr(1)}},$.set(r)}function y(){const t=`/${location.href.split("/").slice(3).join("/")}`.replace(/\?[^#]*/,"").replace(/(?!^)\/#/,"#").replace("/#","#").replace(/\/$/,"");try{const e=function(t){const e=t.split("#")[0].split("/"),n=[],o=[];return e.forEach(e=>{const r=n.concat(`/${e}`).join("");e&&n.push(`/${e}`);try{const e=Y.find(r);h(e),o.push(...e)}catch(e){m(e,t)}}),o}(t);t.includes("#")&&h(e.concat(Y.find(t)))}catch(e){if(!l)return void o("failure",u=e);m(e,t)}}function v(){clearTimeout(c),o("t",c=setTimeout(y,100))}var g,k;a(t,$,t=>{o("$routeInfo",r=t)}),w(()=>{o("ctx",i=document.querySelector('[data-svero="ctx"]').parentElement),o("ctxLoaded",f=!0),v()}),g="__svero__",k={routeInfo:$,assignRoute:function(t,e,n){const r={key:t=t||Math.random().toString(36).substr(2),...n};let c;return Y.mount(p,()=>{c=Y.add(Z(e),r),o("fallback",l=r.fallback&&t||l)}),v(),[t,c]},unassignRoute:function(t){Y.mount(p,()=>{Y.rm(Z(t))}),v()}},_().$$.context.set(g,k);let{$$slots:b={},$$scope:x}=n;return t.$set=t=>{"path"in t&&o("path",p=t.path),"nofallback"in t&&o("nofallback",d=t.nofallback),"$$scope"in t&&o("$$scope",x=t.$$scope)},{failure:u,ctxLoaded:f,path:p,nofallback:d,routeInfo:$,handlePopState:y,$$slots:b,$$scope:x}}const et=({router:t})=>({router:t}),nt=({router:t})=>({router:t});function ot(t){var e,n,o,r,c=[ct,rt],i=[];function s(t){return t.component?0:1}return e=s(t),n=i[e]=c[e](t),{c(){n.c(),o=v()},m(t,n){i[e].m(t,n),d(t,o,n),r=!0},p(t,r){var a=e;(e=s(r))===a?i[e].p(t,r):(A(),q(()=>{i[a].d(1),i[a]=null}),n.o(1),M(),(n=i[e])||(n=i[e]=c[e](r)).c(),n.i(1),n.m(o.parentNode,o))},i(t){r||(n&&n.i(),r=!0)},o(t){n&&n.o(),r=!1},d(t){i[e].d(t),t&&$(o)}}}function rt(t){var e;const n=t.$$slots.default,o=u(n,t,nt);return{c(){o&&o.c()},l(t){o&&o.l(t)},m(t,n){o&&o.m(t,n),e=!0},p(t,e){o&&o.p&&(t.$$scope||t.router)&&o.p(f(n,e,t,et),l(n,e,nt))},i(t){e||(o&&o.i&&o.i(t),e=!0)},o(t){o&&o.o&&o.o(t),e=!1},d(t){o&&o.d(t)}}}function ct(t){var e,n,o=t.component;function r(t){return{props:{router:t.router}}}if(o)var c=new o(r(t));return{c(){c&&c.$$.fragment.c(),e=v()},m(t,o){c&&B(c,t,o),d(t,e,o),n=!0},p(t,n){var i={};if(t.router&&(i.router=n.router),o!==(o=n.component)){if(c){A();const t=c;q(()=>{t.$destroy()}),t.$$.fragment.o(1),M()}o?((c=new o(r(n))).$$.fragment.c(),c.$$.fragment.i(1),B(c,e.parentNode,e)):c=null}else o&&c.$set(i)},i(t){n||(c&&c.$$.fragment.i(t),n=!0)},o(t){c&&c.$$.fragment.o(t),n=!1},d(t){t&&$(e),c&&c.$destroy(t)}}}function it(t){var e,n,o=t.router&&ot(t);return{c(){o&&o.c(),e=v()},m(t,r){o&&o.m(t,r),d(t,e,r),n=!0},p(t,n){n.router?o?(o.p(t,n),o.i(1)):((o=ot(n)).c(),o.i(1),o.m(e.parentNode,e)):o&&(A(),q(()=>{o.d(1),o=null}),o.o(1),M())},i(t){n||(o&&o.i(),n=!0)},o(t){o&&o.o(),n=!1},d(t){o&&o.d(t),t&&$(e)}}}function st(t,e,n){let o;const{assignRoute:r,unassignRoute:c,routeInfo:i}=function(t){return _().$$.context.get(t)}("__svero__");a(t,i,t=>{n("$routeInfo",o=t)});let s,{key:u=null,path:l="",exact:f,fallback:p,component:d,condition:$,redirect:h}=e;var m;w(()=>{[u,s]=r(u,l,{condition:$,redirect:h,fallback:p,exact:f}),n("key",u),n("fullpath",s)}),m=()=>{c(s)},_().$$.on_destroy.push(m);let y,{$$slots:v={},$$scope:g}=e;return t.$set=t=>{"key"in t&&n("key",u=t.key),"path"in t&&n("path",l=t.path),"exact"in t&&n("exact",f=t.exact),"fallback"in t&&n("fallback",p=t.fallback),"component"in t&&n("component",d=t.component),"condition"in t&&n("condition",$=t.condition),"redirect"in t&&n("redirect",h=t.redirect),"$$scope"in t&&n("$$scope",g=t.$$scope)},t.$$.update=(t={$routeInfo:1,key:1})=>{(t.$routeInfo||t.key)&&n("router",y=o[u])},{routeInfo:i,key:u,path:l,exact:f,fallback:p,component:d,condition:$,redirect:h,router:y,$$slots:v,$$scope:g}}function at(t){var e,n,o;const r=t.$$slots.default,c=u(r,t,null);return{c(){var n;e=h("a"),c&&c.c(),e.href=t.href,e.className=t.className,o=g(e,"click",(n=t.onClick,function(t){return t.preventDefault(),n.call(this,t)}))},l(t){c&&c.l(a_nodes)},m(t,o){d(t,e,o),c&&c.m(e,null),n=!0},p(t,o){c&&c.p&&t.$$scope&&c.p(f(r,o,t,null),l(r,o,null)),n&&!t.href||(e.href=o.href),n&&!t.className||(e.className=o.className)},i(t){n||(c&&c.i&&c.i(t),n=!0)},o(t){c&&c.o&&c.o(t),n=!1},d(t){t&&$(e),c&&c.d(t),o()}}}function ut(t,e,n){let{class:o="",href:r="/",className:c=""}=e;w(()=>{n("className",c=c||o)});const i=E();let{$$slots:s={},$$scope:a}=e;return t.$set=t=>{"class"in t&&n("cssClass",o=t.class),"href"in t&&n("href",r=t.href),"className"in t&&n("className",c=t.className),"$$scope"in t&&n("$$scope",a=t.$$scope)},{cssClass:o,href:r,className:c,onClick:function(t){let e=r;"/"!==e.charAt()&&(e=window.location.pathname+e),Q(e),i("click",t)},$$slots:s,$$scope:a}}t.Link=class extends D{constructor(t){super(),z(this,t,ut,at,s,["class","href","className"])}},t.Route=class extends D{constructor(t){super(),z(this,t,st,it,s,["key","path","exact","fallback","component","condition","redirect"])}},t.Router=class extends D{constructor(t){var e;super(),document.getElementById("svelte-h7mijx-style")||((e=h("style")).id="svelte-h7mijx-style",e.textContent=".ctx.svelte-h7mijx{display:none}",p(document.head,e)),z(this,t,tt,X,s,["path","nofallback"])}},t.navigateTo=Q,Object.defineProperty(t,"__esModule",{value:!0})});
